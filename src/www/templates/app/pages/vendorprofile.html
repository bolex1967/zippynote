<html>
 
    <body>
      <div class="row" >
    
      <div class="col-xs-12 col-sm-6"  >
       <div class="box" zippy="patext" >
      
        <div class="box-body"   >
         <h3>About me</h3>
         <h5>(resume, skills, portfolio, etc.) </h5>
         <a zippy="editabout" class="btn btn-primary">Edit</a>
         <p zippy="abouttext">
          
         </p>
        </div>
       </div>
      <div class="box" zippy="paedit" >
      
        <div class="box-body" >
         <h3>Edit</h3>   
            <form zippy="aeditform" >
          <div class="form-group">
                        
           <textarea style="height:300px;" class="form-control" zippy="aboutmeedit"  ></textarea>
         </div>
                          
             <div class="form-group">
               <a  zippy="acancel" class="btn btn-default">Cancel</a>&nbsp;
               <button type="submit" class="btn btn-primary"  >Save</button>   
             </div>
            </form>
        </div>
       </div>
      
      
   
      </div> 
      
      
      
         
    <div class="col-xs-12  col-sm-6"  >
     <div class="row" >
    <div class="col-xs-12  col-sm-12" zippy="plist">
      <div class="box"  >
      
      <div class="box-body"   >
        <h3>My Services</h3>
        <a class="btn btn-primary" zippy="addnew">New Service</a>
        
        <table class="table">
          <tr  >
           <th  >Service</th>
           <th  >Type</th>
           <th  >Cost,$</th>
           <th  >Description</th>
           <th  > </th>
          </tr>
        <tr zippy="slist">
           <td zippy="type"></td>
           <td zippy="subtype"></td>
           <td zippy="cost" style="text-align: right;"></td>
           <td zippy="desc"></td>
           <td  ><a zippy="edits" class="fa fa-edit"></a> &nbsp;&nbsp;<a  zippy="dels"  class="fa fa-remove"></a> </td>
          </tr>
        </table>
      </div>
      </div>
      </div>
      
      
          <div class="col-xs-12  col-sm-12" zippy="pedit" >
                  <div class="box" >

         <div class="box-body"   >
         <h3>Edit Service</h3>
         <form zippy="sform"  enctype="multipart/form-data">
           <div class="form-group"  >
              <label  for="ecity">City</label>
              <input type="text" autocomplete="off"  zippy="ecity"     class="form-control" required="required" >
              <input zippy="ecityid"  type="hidden"   >
              <input zippy="latitude"  type="hidden"   >
              <input zippy="longitude"  type="hidden"   >
              
            </div>          
            <div class="form-group">
            <label for="etype">Service</label>
              <select class="form-control"   zippy="etype">
                <option value="0">-- Select --</option>
              </select>
            </div>
            {{#esubtype}}
            <div class="form-group"  >
              <label for="esubtype">Category</label>
              <select zippy="esubtype" class="form-control"  >
              </select>
            </div>
             {{/esubtype}}
                     {{#egenre}}
                        <div class="form-group"  > 
                        <label   >Genre</label>
                        <div class="checkbox">
                            <label zippy="egenre">
                               
                            </label>
                        </div>                         
                        </div>  
                    {{/egenre}}            
            {{#eaddress}} 
            <div class="form-group"  >
              <label  for="eaddress">Address </label>
              
              <input  autocomplete="off" zippy="eaddress"   class="form-control"     >
              <a onclick="openmapd()" id="showmapicon" style="margin-top:4px;cursor:pointer;display:none;;" class="btn btn-default" title="Open map"><span style="font-weight: bold;color:brown;" class=" fa fa-map-marker"></span> Open map</a> 
            
              
            
            </div> 
             {{/eaddress}}
            {{#ecost}}
           <div class="form-group"  >
              <label  for="ecost">Cost (p/h)</label>
              <input zippy="ecost" pattern="[0-9\.]+" class="form-control numericinput" >
            </div> 
            {{/ecost}}
            {{#efood}}
            <div class="form-group"  >
              <label  for="ecostmin">Minimum order amount</label>
              <input zippy="ecostmin" pattern="[0-9\.]+" class="form-control numericinput" >
            </div> 
           <div class="form-group"  >
              <label  for="ecostdel">Cost of delivery</label>
              <input zippy="ecostdel" pattern="[0-9\.]+" class="form-control numericinput" >
            </div> 
            <div class="checkbox">
                <label>
                  <input zippy="ecatering" type="checkbox"> Catering
                </label>
            </div> 
            
            {{/efood}}
           {{#ecapacity}}
            <div class="form-group"  >
              <label  for="ecapacity">Capacity</label>
              <input zippy="ecapacity" pattern="[0-9]+" class="form-control numericinput" >
            </div> 
            {{/ecapacity}}
              {{#eimage}}
             <div class="form-group">
                            <label for="image">Image</label>
                            <img  style="display:block;height:128px;" zippy="imgprev">
                            <input type="file" class="form-control" zippy="image" >
                           

                        </div>            
                   {{/eimage}}

           <div class="form-group"  >
              <label  for="edesc">Description</label>
              <textarea style="height:120px;" zippy="edesc"   class="form-control" ></textarea>
            </div>
            <a class="btn btn-default" zippy="cancel">Cancel</a>&nbsp; 
            <button type="submit" class="btn btn-primary" zippy="save">Save</button>
        </form>
 
         </div>
      </div>
      </div>
       </div>
      </div>

   </div>
     
                  

        <div id="mapedit" class="modal fade" tabindex="-1" role="dialog" >
            <div class="modal-dialog"  >
                <div class="modal-content">
                  
                     
                        <div class="modal-header"> 
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"  >Drag marker to set coordinates</h4>
                        </div> 
                        <div class="modal-body">
                     
                           <div id="mapgoogle" style=" height: 400px;;width:100%"></div>   
                        </div>
                     </div>
                        
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

  
                           
        
 <script src="http://maps.google.com/maps/api/js?libraries=places&key=AIzaSyBnsTH8DEApuXAxC4GdtbcoM-3FBZchYLw"  ></script> 
              
<script type="text/javascript">
 
  
 
 
 var myMap;

    var marker = null;
    
           
         if( $("#latitude").val() >0){
            $('#showmapicon').show();  
         }
         
         $('#mapedit').modal({
            show: false
        });
  
      $('#mapedit').on('shown.bs.modal', function (e) {
          openmap() ; 
      })
  
        function check_dels() {
                return  confirm("Are you  about to delete the service?")
            }
    
     function openmapd() {
       $('#mapedit').modal({
            show: true
        })
            }
  
     function openmap() {
                
             var lat =   $("#latitude").val();
             var lng =  $("#longitude").val();
             
        
                  
           var mapOptions = {
                zoom: 14,
                center: new google.maps.LatLng(lat, lng),
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };
            myMap = new google.maps.Map(document.getElementById("mapgoogle"), mapOptions); //инициализация карты
                      
             showmarker(lat,lng) ;       
                           
             
           
               
       }
 
   
   function showmarker(lat,lon) {

        if (marker != null) marker.setMap(null);

        var point = new google.maps.LatLng(
                                    parseFloat(lat),
                                    parseFloat(lon));

         marker = new google.maps.Marker({
            map: myMap,
            draggable: true,
            position: point,
            icon: 'http://www.google.com/mapfiles/marker.png',
            shadow: 'http://www.google.com/mapfiles/shadow50.png'
        });
   google.maps.event.addListener(marker, 'dragend', function (event) {
            $('#latitude').val(this.getPosition().lat())  ;
            $('#longitude').val(this.getPosition().lng())  ;
        });      
    }  
    $(document).ready(function () {

         
         var ecity = document.getElementById('ecity');
         if(ecity !== null){
         
             var  autocomplete = new google.maps.places.Autocomplete(ecity);
             autocomplete.addListener('place_changed', function () {
               
              var place = autocomplete.getPlace();
                $("#ecityid").val(place.place_id);
                $('#latitude').val(place.geometry.location.lat());
                $('#longitude').val(place.geometry.location.lng()); 
               
                         
             } );
         } 
    
        var eaddress = document.getElementById('eaddress');
         if(eaddress !== null){
         
             var  autocomplete2 = new google.maps.places.Autocomplete(eaddress);
             autocomplete2.addListener('place_changed', function () {
      
              var place = autocomplete2.getPlace();
                  $('#latitude').val(place.geometry.location.lat());
                  $('#longitude').val(place.geometry.location.lng());            
                  $('#showmapicon').show();
             } );
         } 
         
         
         
         
    });
   
   if( $('#aboutmeedit').length >0 )  {     
         CKEDITOR.replace( 'aboutmeedit', {
            customConfig: '/assets/ckeditor/cconfig.js'
            ,language:"en" 
        } );        
   }
 </script>
    </body>
    
     
</html>
